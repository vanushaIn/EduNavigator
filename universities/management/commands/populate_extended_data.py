from django.core.management.base import BaseCommand
from universities.models import Region, UniversityType, University, Faculty, Program
from django.contrib.auth.models import User


class Command(BaseCommand):
    help = 'Заполняет базу данных 60 российскими университетами'

    def handle(self, *args, **options):
        self.stdout.write('Начинаем заполнение базы данных 60 университетами...')
        
        # Создаем регионы
        regions_data = [
            {'name': 'Москва', 'code': '77'},
            {'name': 'Санкт-Петербург', 'code': '78'},
            {'name': 'Московская область', 'code': '50'},
            {'name': 'Краснодарский край', 'code': '23'},
            {'name': 'Свердловская область', 'code': '66'},
            {'name': 'Новосибирская область', 'code': '54'},
            {'name': 'Республика Татарстан', 'code': '16'},
            {'name': 'Нижегородская область', 'code': '52'},
            {'name': 'Самарская область', 'code': '63'},
            {'name': 'Ростовская область', 'code': '61'},
            {'name': 'Республика Башкортостан', 'code': '02'},
            {'name': 'Красноярский край', 'code': '24'},
            {'name': 'Воронежская область', 'code': '36'},
            {'name': 'Пермский край', 'code': '59'},
            {'name': 'Волгоградская область', 'code': '34'},
            {'name': 'Саратовская область', 'code': '64'},
            {'name': 'Тюменская область', 'code': '72'},
            {'name': 'Томская область', 'code': '70'},
            {'name': 'Кемеровская область', 'code': '42'},
            {'name': 'Иркутская область', 'code': '38'},
            {'name': 'Приморский край', 'code': '25'},
        ]
        
        for region_data in regions_data:
            region, created = Region.objects.get_or_create(
                code=region_data['code'],
                defaults={'name': region_data['name']}
            )
            if created:
                self.stdout.write(f'Создан регион: {region.name}')
        
        # Создаем типы университетов
        university_types_data = [
            'Университет', 'Институт', 'Академия', 'Консерватория',
            'Технический университет', 'Медицинский университет', 'Педагогический университет',
            'Экономический университет', 'Гуманитарный университет', 'Политехнический университет'
        ]
        
        for type_name in university_types_data:
            university_type, created = UniversityType.objects.get_or_create(name=type_name)
            if created:
                self.stdout.write(f'Создан тип университета: {university_type.name}')
        
        # Создаем 60 университетов
        universities_data = [
            # Москва
            {'name': 'Московский государственный университет имени М.В. Ломоносова', 'short_name': 'МГУ', 'city': 'Москва', 'region': 'Москва', 'type': 'Университет', 'year': 1755},
            {'name': 'Московский физико-технический институт', 'short_name': 'МФТИ', 'city': 'Долгопрудный', 'region': 'Московская область', 'type': 'Технический университет', 'year': 1951},
            {'name': 'Московский государственный технический университет имени Н.Э. Баумана', 'short_name': 'МГТУ им. Баумана', 'city': 'Москва', 'region': 'Москва', 'type': 'Технический университет', 'year': 1830},
            {'name': 'Национальный исследовательский университет "Высшая школа экономики"', 'short_name': 'НИУ ВШЭ', 'city': 'Москва', 'region': 'Москва', 'type': 'Университет', 'year': 1992},
            {'name': 'Российский университет дружбы народов', 'short_name': 'РУДН', 'city': 'Москва', 'region': 'Москва', 'type': 'Университет', 'year': 1960},
            {'name': 'Московский государственный институт международных отношений', 'short_name': 'МГИМО', 'city': 'Москва', 'region': 'Москва', 'type': 'Университет', 'year': 1944},
            {'name': 'Московский государственный медицинский университет имени И.М. Сеченова', 'short_name': 'Первый МГМУ', 'city': 'Москва', 'region': 'Москва', 'type': 'Медицинский университет', 'year': 1758},
            {'name': 'Российский национальный исследовательский медицинский университет имени Н.И. Пирогова', 'short_name': 'РНИМУ', 'city': 'Москва', 'region': 'Москва', 'type': 'Медицинский университет', 'year': 1906},
            {'name': 'Московский государственный педагогический университет', 'short_name': 'МГПУ', 'city': 'Москва', 'region': 'Москва', 'type': 'Педагогический университет', 'year': 1872},
            {'name': 'Московский государственный лингвистический университет', 'short_name': 'МГЛУ', 'city': 'Москва', 'region': 'Москва', 'type': 'Университет', 'year': 1930},
            
            # Санкт-Петербург
            {'name': 'Санкт-Петербургский государственный университет', 'short_name': 'СПбГУ', 'city': 'Санкт-Петербург', 'region': 'Санкт-Петербург', 'type': 'Университет', 'year': 1724},
            {'name': 'Санкт-Петербургский политехнический университет Петра Великого', 'short_name': 'СПбПУ', 'city': 'Санкт-Петербург', 'region': 'Санкт-Петербург', 'type': 'Политехнический университет', 'year': 1899},
            {'name': 'Санкт-Петербургский государственный медицинский университет имени И.П. Павлова', 'short_name': 'СПбГМУ', 'city': 'Санкт-Петербург', 'region': 'Санкт-Петербург', 'type': 'Медицинский университет', 'year': 1897},
            {'name': 'Санкт-Петербургский государственный экономический университет', 'short_name': 'СПбГЭУ', 'city': 'Санкт-Петербург', 'region': 'Санкт-Петербург', 'type': 'Экономический университет', 'year': 2012},
            {'name': 'Санкт-Петербургский государственный университет телекоммуникаций имени профессора М.А. Бонч-Бруевича', 'short_name': 'СПбГУТ', 'city': 'Санкт-Петербург', 'region': 'Санкт-Петербург', 'type': 'Технический университет', 'year': 1930},
            
            # Другие регионы
            {'name': 'Новосибирский государственный университет', 'short_name': 'НГУ', 'city': 'Новосибирск', 'region': 'Новосибирская область', 'type': 'Университет', 'year': 1959},
            {'name': 'Казанский федеральный университет', 'short_name': 'КФУ', 'city': 'Казань', 'region': 'Республика Татарстан', 'type': 'Университет', 'year': 1804},
            {'name': 'Уральский федеральный университет имени первого Президента России Б.Н. Ельцина', 'short_name': 'УрФУ', 'city': 'Екатеринбург', 'region': 'Свердловская область', 'type': 'Университет', 'year': 2010},
            {'name': 'Нижегородский государственный университет имени Н.И. Лобачевского', 'short_name': 'ННГУ', 'city': 'Нижний Новгород', 'region': 'Нижегородская область', 'type': 'Университет', 'year': 1916},
            {'name': 'Самарский национальный исследовательский университет имени академика С.П. Королева', 'short_name': 'СамГУ', 'city': 'Самара', 'region': 'Самарская область', 'type': 'Университет', 'year': 1942},
            {'name': 'Томский государственный университет', 'short_name': 'ТГУ', 'city': 'Томск', 'region': 'Томская область', 'type': 'Университет', 'year': 1878},
            {'name': 'Томский политехнический университет', 'short_name': 'ТПУ', 'city': 'Томск', 'region': 'Томская область', 'type': 'Политехнический университет', 'year': 1896},
            {'name': 'Сибирский федеральный университет', 'short_name': 'СФУ', 'city': 'Красноярск', 'region': 'Красноярский край', 'type': 'Университет', 'year': 2006},
            {'name': 'Дальневосточный федеральный университет', 'short_name': 'ДВФУ', 'city': 'Владивосток', 'region': 'Приморский край', 'type': 'Университет', 'year': 1899},
            {'name': 'Южный федеральный университет', 'short_name': 'ЮФУ', 'city': 'Ростов-на-Дону', 'region': 'Ростовская область', 'type': 'Университет', 'year': 2006},
            {'name': 'Воронежский государственный университет', 'short_name': 'ВГУ', 'city': 'Воронеж', 'region': 'Воронежская область', 'type': 'Университет', 'year': 1918},
            {'name': 'Пермский государственный национальный исследовательский университет', 'short_name': 'ПГНИУ', 'city': 'Пермь', 'region': 'Пермский край', 'type': 'Университет', 'year': 1916},
            {'name': 'Волгоградский государственный университет', 'short_name': 'ВолГУ', 'city': 'Волгоград', 'region': 'Волгоградская область', 'type': 'Университет', 'year': 1980},
            {'name': 'Саратовский национальный исследовательский государственный университет имени Н.Г. Чернышевского', 'short_name': 'СГУ', 'city': 'Саратов', 'region': 'Саратовская область', 'type': 'Университет', 'year': 1909},
            {'name': 'Тюменский государственный университет', 'short_name': 'ТюмГУ', 'city': 'Тюмень', 'region': 'Тюменская область', 'type': 'Университет', 'year': 1973},
            {'name': 'Кемеровский государственный университет', 'short_name': 'КемГУ', 'city': 'Кемерово', 'region': 'Кемеровская область', 'type': 'Университет', 'year': 1973},
            {'name': 'Иркутский государственный университет', 'short_name': 'ИГУ', 'city': 'Иркутск', 'region': 'Иркутская область', 'type': 'Университет', 'year': 1918},
            {'name': 'Башкирский государственный университет', 'short_name': 'БашГУ', 'city': 'Уфа', 'region': 'Республика Башкортостан', 'type': 'Университет', 'year': 1909},
            {'name': 'Уфимский государственный авиационный технический университет', 'short_name': 'УГАТУ', 'city': 'Уфа', 'region': 'Республика Башкортостан', 'type': 'Технический университет', 'year': 1932},
            {'name': 'Кубанский государственный университет', 'short_name': 'КубГУ', 'city': 'Краснодар', 'region': 'Краснодарский край', 'type': 'Университет', 'year': 1920},
            {'name': 'Кубанский государственный технологический университет', 'short_name': 'КубГТУ', 'city': 'Краснодар', 'region': 'Краснодарский край', 'type': 'Технический университет', 'year': 1918},
            {'name': 'Ростовский государственный университет путей сообщения', 'short_name': 'РГУПС', 'city': 'Ростов-на-Дону', 'region': 'Ростовская область', 'type': 'Технический университет', 'year': 1929},
            {'name': 'Ростовский государственный медицинский университет', 'short_name': 'РостГМУ', 'city': 'Ростов-на-Дону', 'region': 'Ростовская область', 'type': 'Медицинский университет', 'year': 1915},
            {'name': 'Воронежский государственный технический университет', 'short_name': 'ВГТУ', 'city': 'Воронеж', 'region': 'Воронежская область', 'type': 'Технический университет', 'year': 1956},
            {'name': 'Пермский национальный исследовательский политехнический университет', 'short_name': 'ПНИПУ', 'city': 'Пермь', 'region': 'Пермский край', 'type': 'Политехнический университет', 'year': 1953},
            {'name': 'Волгоградский государственный технический университет', 'short_name': 'ВолгГТУ', 'city': 'Волгоград', 'region': 'Волгоградская область', 'type': 'Технический университет', 'year': 1930},
            {'name': 'Саратовский государственный технический университет имени Ю.А. Гагарина', 'short_name': 'СГТУ', 'city': 'Саратов', 'region': 'Саратовская область', 'type': 'Технический университет', 'year': 1930},
            {'name': 'Тюменский индустриальный университет', 'short_name': 'ТИУ', 'city': 'Тюмень', 'region': 'Тюменская область', 'type': 'Технический университет', 'year': 1956},
            {'name': 'Кемеровский государственный технический университет', 'short_name': 'КемГТУ', 'city': 'Кемерово', 'region': 'Кемеровская область', 'type': 'Технический университет', 'year': 1950},
            {'name': 'Иркутский национальный исследовательский технический университет', 'short_name': 'ИРНИТУ', 'city': 'Иркутск', 'region': 'Иркутская область', 'type': 'Технический университет', 'year': 1930},
            {'name': 'Новосибирский государственный технический университет', 'short_name': 'НГТУ', 'city': 'Новосибирск', 'region': 'Новосибирская область', 'type': 'Технический университет', 'year': 1950},
            {'name': 'Казанский национальный исследовательский технический университет имени А.Н. Туполева', 'short_name': 'КНИТУ-КАИ', 'city': 'Казань', 'region': 'Республика Татарстан', 'type': 'Технический университет', 'year': 1932},
            {'name': 'Уфимский государственный нефтяной технический университет', 'short_name': 'УГНТУ', 'city': 'Уфа', 'region': 'Республика Башкортостан', 'type': 'Технический университет', 'year': 1948},
            {'name': 'Кубанский государственный аграрный университет имени И.Т. Трубилина', 'short_name': 'КубГАУ', 'city': 'Краснодар', 'region': 'Краснодарский край', 'type': 'Университет', 'year': 1922},
            {'name': 'Ростовский государственный экономический университет', 'short_name': 'РГЭУ', 'city': 'Ростов-на-Дону', 'region': 'Ростовская область', 'type': 'Экономический университет', 'year': 1931},
            {'name': 'Воронежский государственный аграрный университет имени императора Петра I', 'short_name': 'ВГАУ', 'city': 'Воронеж', 'region': 'Воронежская область', 'type': 'Университет', 'year': 1912},
            {'name': 'Пермский государственный аграрно-технологический университет имени академика Д.Н. Прянишникова', 'short_name': 'ПГАТУ', 'city': 'Пермь', 'region': 'Пермский край', 'type': 'Университет', 'year': 1918},
            {'name': 'Волгоградский государственный аграрный университет', 'short_name': 'ВолГАУ', 'city': 'Волгоград', 'region': 'Волгоградская область', 'type': 'Университет', 'year': 1944},
            {'name': 'Саратовский государственный аграрный университет имени Н.И. Вавилова', 'short_name': 'СГАУ', 'city': 'Саратов', 'region': 'Саратовская область', 'type': 'Университет', 'year': 1913},
            {'name': 'Тюменский государственный аграрный университет Северного Зауралья', 'short_name': 'ТГАУ', 'city': 'Тюмень', 'region': 'Тюменская область', 'type': 'Университет', 'year': 1959},
            {'name': 'Кемеровский государственный сельскохозяйственный институт', 'short_name': 'КГСХИ', 'city': 'Кемерово', 'region': 'Кемеровская область', 'type': 'Институт', 'year': 1952},
            {'name': 'Иркутский государственный аграрный университет имени А.А. Ежевского', 'short_name': 'ИрГАУ', 'city': 'Иркутск', 'region': 'Иркутская область', 'type': 'Университет', 'year': 1934},
            {'name': 'Новосибирский государственный аграрный университет', 'short_name': 'НГАУ', 'city': 'Новосибирск', 'region': 'Новосибирская область', 'type': 'Университет', 'year': 1936},
            {'name': 'Казанский государственный аграрный университет', 'short_name': 'КГАУ', 'city': 'Казань', 'region': 'Республика Татарстан', 'type': 'Университет', 'year': 1922},
            {'name': 'Уфимский государственный аграрный университет', 'short_name': 'УГАУ', 'city': 'Уфа', 'region': 'Республика Башкортостан', 'type': 'Университет', 'year': 1930},
            {'name': 'Краснодарский государственный институт культуры', 'short_name': 'КГИК', 'city': 'Краснодар', 'region': 'Краснодарский край', 'type': 'Институт', 'year': 1966},
            {'name': 'Ростовская государственная консерватория имени С.В. Рахманинова', 'short_name': 'РГК', 'city': 'Ростов-на-Дону', 'region': 'Ростовская область', 'type': 'Консерватория', 'year': 1967},
            {'name': 'Воронежский государственный институт искусств', 'short_name': 'ВГИИ', 'city': 'Воронеж', 'region': 'Воронежская область', 'type': 'Институт', 'year': 1971},
            {'name': 'Пермский государственный институт культуры', 'short_name': 'ПГИК', 'city': 'Пермь', 'region': 'Пермский край', 'type': 'Институт', 'year': 1975},
            {'name': 'Волгоградский государственный институт искусств и культуры', 'short_name': 'ВГИИК', 'city': 'Волгоград', 'region': 'Волгоградская область', 'type': 'Институт', 'year': 1990},
            {'name': 'Саратовская государственная консерватория имени Л.В. Собинова', 'short_name': 'СГК', 'city': 'Саратов', 'region': 'Саратовская область', 'type': 'Консерватория', 'year': 1912},
            {'name': 'Тюменский государственный институт культуры', 'short_name': 'ТГИК', 'city': 'Тюмень', 'region': 'Тюменская область', 'type': 'Институт', 'year': 1991},
            {'name': 'Кемеровский государственный институт культуры и искусств', 'short_name': 'КемГИК', 'city': 'Кемерово', 'region': 'Кемеровская область', 'type': 'Институт', 'year': 1969},
            {'name': 'Иркутский государственный университет путей сообщения', 'short_name': 'ИрГУПС', 'city': 'Иркутск', 'region': 'Иркутская область', 'type': 'Университет', 'year': 1975},
            {'name': 'Новосибирский государственный университет архитектуры, дизайна и искусств', 'short_name': 'НГУАДИ', 'city': 'Новосибирск', 'region': 'Новосибирская область', 'type': 'Университет', 'year': 1989},
            {'name': 'Казанский государственный институт культуры', 'short_name': 'КГИК', 'city': 'Казань', 'region': 'Республика Татарстан', 'type': 'Институт', 'year': 1969},
            {'name': 'Уфимский государственный институт искусств имени Загира Исмагилова', 'short_name': 'УГИИ', 'city': 'Уфа', 'region': 'Республика Башкортостан', 'type': 'Институт', 'year': 1968},
        ]
        
        for uni_data in universities_data:
            region = Region.objects.get(name=uni_data['region'])
            university_type = UniversityType.objects.get(name=uni_data['type'])
            
            university, created = University.objects.get_or_create(
                short_name=uni_data['short_name'],
                defaults={
                    'name': uni_data['name'],
                    'description': f'Ведущий образовательный центр региона {uni_data["region"]}. Основан в {uni_data["year"]} году.',
                    'founded_year': uni_data['year'],
                    'region': region,
                    'city': uni_data['city'],
                    'address': f'г. {uni_data["city"]}, ул. Университетская, д. 1',
                    'website': f'https://www.{uni_data["short_name"].lower()}.ru',
                    'email': f'info@{uni_data["short_name"].lower()}.ru',
                    'phone': '+7 (495) 123-45-67',
                    'university_type': university_type,
                    'is_public': True,
                    'accreditation': f'Аккредитован до {uni_data["year"] + 6} года',
                    'license': f'Лицензия № {uni_data["year"]} от 01.01.2020',
                }
            )
            if created:
                self.stdout.write(f'Создан университет: {university.name}')
        
        self.stdout.write(
            self.style.SUCCESS(f'База данных успешно заполнена {len(universities_data)} университетами!')
        )
